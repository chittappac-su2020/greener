{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/WebDesign/Greener/final-project/greener-mern/client/src/components/Products/Cart.js\";\nimport React from 'react';\nimport axios from \"axios\";\nimport './Products.css';\nimport * as numeral from 'numeral';\nimport PaypalButton from '../../components/Jobs/pay';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport { Link } from \"react-router-dom\";\nconst CLIENT = {\n  sandbox: 'AXLG5l9gXCMut3IBoDyqmqKyq0fP5tl4E1V_U0UInnEtNymfLXmNKVrMbDYL0Ehoelv98tYl3t-j-p8R'\n};\nconst ENV = 'sandbox';\n\nclass Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getCartsData = async () => {\n      if (this.props.auth.isAuthenticated) {\n        var add = 0;\n        await axios.get(\"/api/cart?id=\" + this.props.auth.user.id).then(response => {\n          this.setState({\n            products: response.data,\n            cartExists: true\n          });\n          this.state.products.items.map(item => {\n            add = add + item.productPrice * item.quantity;\n          });\n          this.setState({\n            cartTotal: numeral(add).format('$0,0.00')\n          });\n        });\n      } else {\n        this.props.history.push(\"/login\");\n      }\n    };\n\n    this.state = {\n      products: [],\n      cartExists: false,\n      cartTotal: 0\n    };\n    this.getCartsData();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container cart-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Your Cart\"), React.createElement(\"div\", {\n      className: \"cart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"cart-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, this.state.cartExists ? React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Product Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Quantity\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Total\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, this.state.products.items.map(item => {\n      return React.createElement(\"tr\", {\n        key: item.productName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, item.productName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, numeral(item.productPrice).format('$0,0.00')), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, item.quantity), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, numeral(item.productPrice * item.quantity).format('$0,0.00')), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        title: \"Remove this item from the cart\",\n        onClick: () => this.removeItem(item._id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))));\n    }))) : React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"No items in the cart.\")), React.createElement(\"div\", {\n      className: \"cart-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \" Total amount:\", this.state.cartExists ? React.createElement(\"span\", {\n      className: \"total\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \" \", this.state.cartTotal) : '')), React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => this.setActiveModal('checkout'),\n      className: \"btn btn-info\",\n      disabled: !this.state.cartExists,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Checkout\"), React.createElement(\"button\", {\n      type: \"Button\",\n      onClick: () => this.setActiveModal('dialog'),\n      className: \"btn btn-danger\",\n      disabled: !this.state.cartExists,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \" Empty cart\"))));\n  }\n\n}\n\nCart.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser\n})(Cart);","map":{"version":3,"sources":["/Users/apple/Documents/WebDesign/Greener/final-project/greener-mern/client/src/components/Products/Cart.js"],"names":["React","axios","numeral","PaypalButton","PropTypes","connect","logoutUser","Link","CLIENT","sandbox","ENV","Cart","Component","constructor","props","getCartsData","auth","isAuthenticated","add","get","user","id","then","response","setState","products","data","cartExists","state","items","map","item","productPrice","quantity","cartTotal","format","history","push","render","productName","removeItem","_id","setActiveModal","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from \"axios\";\nimport './Products.css';\nimport * as numeral from 'numeral';\n\nimport PaypalButton from '../../components/Jobs/pay';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport {Link} from  \"react-router-dom\";\n\nconst CLIENT = {\n  sandbox: 'AXLG5l9gXCMut3IBoDyqmqKyq0fP5tl4E1V_U0UInnEtNymfLXmNKVrMbDYL0Ehoelv98tYl3t-j-p8R',\n  \n};\nconst ENV = 'sandbox';\n\nclass Cart extends React.Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            products: [],\n            cartExists:false,\n            cartTotal:0\n        }\n        this.getCartsData();\n    }\n\n    getCartsData = async() => {\n        if (this.props.auth.isAuthenticated) {\n          var add = 0;\n           await axios.get(\"/api/cart?id=\" + this.props.auth.user.id).then((response) => {\n                this.setState({ products: response.data, cartExists:true })\n                this.state.products.items.map((item) => {\n                add = add + (item.productPrice * item.quantity); \n                });\n                this.setState({ cartTotal: numeral(add).format('$0,0.00')});\n              });\n        }\n        else {\n            this.props.history.push(\"/login\");\n        }\n    }\n\n    \n\n    render() {\n        return (\n          <div className=\"container cart-container\">\n        <h1>Your Cart</h1>\n        <div className=\"cart\">\n       \n            <div className=\"cart-items\">\n            {this.state.cartExists ?\n              <table>\n                <thead>\n                  <tr>\n                    <th></th>\n                    <th>Product Name</th>\n                    <th>Price</th>\n                    <th>Quantity</th>\n                    <th>Total</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {this.state.products.items.map((item) => {\n                    return (\n                      <tr key={item.productName} >\n                        <td></td>\n                        <td>{item.productName}</td>\n                        <td>{numeral(item.productPrice).format('$0,0.00')}</td>\n                        <td>{item.quantity}</td>\n                        <td>{numeral(item.productPrice * item.quantity).format('$0,0.00')}</td>\n                        <td><button title=\"Remove this item from the cart\" onClick={() => this.removeItem(item._id)}><i className=\"fa fa-trash\"></i></button></td>\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table> :\n              <h1>No items in the cart.</h1>\n            }\n            </div>\n            <div className=\"cart-info\">\n             <p>\n               <strong> Total amount: \n                {this.state.cartExists ? (<span className=\"total\"> {this.state.cartTotal}</span>) : ''}</strong>\n              </p>\n              <button type=\"button\"\n                onClick={() => this.setActiveModal('checkout')}\n                className=\"btn btn-info\"\n                disabled={!this.state.cartExists}\n              >Checkout</button>\n              <button type=\"Button\"\n                onClick={() => this.setActiveModal('dialog')}\n                className=\"btn btn-danger\"     \n                disabled={!this.state.cartExists}\n              > Empty cart</button>\n          \n          </div>\n            </div>\n            </div>\n        );\n    }\n}\nCart.propTypes = {\n    logoutUser: PropTypes.func.isRequired,\n    auth: PropTypes.object.isRequired\n};\nconst mapStateToProps = state => ({\n    auth: state.auth\n});\nexport default connect(\n    mapStateToProps,\n    { logoutUser }\n)(Cart);\n"]},"metadata":{},"sourceType":"module"}