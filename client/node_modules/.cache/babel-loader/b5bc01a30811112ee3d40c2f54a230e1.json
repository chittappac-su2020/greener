{"ast":null,"code":"'use strict';\n\nvar PropTypes = require('prop-types');\n\nvar React = require('react');\n\nvar createReactClass = require('create-react-class');\n\nvar d3 = require('d3');\n\nvar DataSeries = require('./DataSeries');\n\nvar _require = require('../common');\n\nvar Chart = _require.Chart;\nvar XAxis = _require.XAxis;\nvar YAxis = _require.YAxis;\nvar Tooltip = _require.Tooltip;\n\nvar _require2 = require('../mixins');\n\nvar CartesianChartPropsMixin = _require2.CartesianChartPropsMixin;\nvar DefaultAccessorsMixin = _require2.DefaultAccessorsMixin;\nvar ViewBoxMixin = _require2.ViewBoxMixin;\nvar TooltipMixin = _require2.TooltipMixin;\nmodule.exports = createReactClass({\n  displayName: 'BarChart',\n  propTypes: {\n    chartClassName: PropTypes.string,\n    data: PropTypes.array.isRequired,\n    hoverAnimation: PropTypes.bool,\n    margins: PropTypes.object,\n    rangeRoundBandsPadding: PropTypes.number,\n    // https://github.com/mbostock/d3/wiki/Stack-Layout#offset\n    stackOffset: PropTypes.oneOf(['silhouette', 'expand', 'wigget', 'zero']),\n    grouped: PropTypes.bool,\n    valuesAccessor: PropTypes.func,\n    xAccessor: PropTypes.func,\n    yAccessor: PropTypes.func,\n    y0Accessor: PropTypes.func,\n    title: PropTypes.string,\n    xAxisClassName: PropTypes.string,\n    yAxisClassName: PropTypes.string,\n    yAxisTickCount: PropTypes.number\n  },\n  mixins: [CartesianChartPropsMixin, DefaultAccessorsMixin, ViewBoxMixin, TooltipMixin],\n  getDefaultProps: function getDefaultProps() {\n    return {\n      chartClassName: 'rd3-barchart',\n      hoverAnimation: true,\n      margins: {\n        top: 10,\n        right: 20,\n        bottom: 40,\n        left: 45\n      },\n      rangeRoundBandsPadding: 0.25,\n      stackOffset: 'zero',\n      grouped: false,\n      valuesAccessor: function valuesAccessor(d) {\n        return d.values;\n      },\n      y0Accessor: function y0Accessor(d) {\n        return d.y0;\n      },\n      xAxisClassName: 'rd3-barchart-xaxis',\n      yAxisClassName: 'rd3-barchart-yaxis',\n      yAxisTickCount: 4\n    };\n  },\n  _getStackedValuesMaxY: function _getStackedValuesMaxY(_data) {\n    var _this = this; // in stacked bar chart, the maximum height we need for\n    // yScale domain is the sum of y0 + y\n\n\n    var valuesAccessor = this.props.valuesAccessor;\n    return d3.max(_data, function (d) {\n      return d3.max(valuesAccessor(d), function (d2) {\n        return (// where y0, y is generated by d3.layout.stack()\n          _this.props.y0Accessor(d2) + _this.props.yAccessor(d2)\n        );\n      });\n    });\n  },\n  _getStackedValuesMinY: function _getStackedValuesMinY(_data) {\n    var _this2 = this;\n\n    var valuesAccessor = this.props.valuesAccessor;\n    return d3.min(_data, function (d) {\n      return d3.min(valuesAccessor(d), function (d2) {\n        return (// where y0, y is generated by d3.layout.stack()\n          _this2.props.y0Accessor(d2) + _this2.props.yAccessor(d2)\n        );\n      });\n    });\n  },\n  _getLabels: function _getLabels(firstSeries) {\n    // we only need first series to get all the labels\n    var _props = this.props;\n    var valuesAccessor = _props.valuesAccessor;\n    var xAccessor = _props.xAccessor;\n    return valuesAccessor(firstSeries).map(xAccessor);\n  },\n  _stack: function _stack() {\n    // Only support columns with all positive or all negative values\n    // https://github.com/mbostock/d3/issues/2265\n    var _props2 = this.props;\n    var stackOffset = _props2.stackOffset;\n    var xAccessor = _props2.xAccessor;\n    var yAccessor = _props2.yAccessor;\n    var valuesAccessor = _props2.valuesAccessor;\n    return d3.layout.stack().offset(stackOffset).x(xAccessor).y(yAccessor).values(valuesAccessor);\n  },\n  render: function render() {\n    var props = this.props;\n    var yOrient = this.getYOrient();\n    var domain = props.domain || {};\n\n    if (props.data.length === 0) {\n      return null;\n    }\n\n    var _data = this._stack()(props.data);\n\n    var _getDimensions = this.getDimensions();\n\n    var innerHeight = _getDimensions.innerHeight;\n    var innerWidth = _getDimensions.innerWidth;\n    var trans = _getDimensions.trans;\n    var svgMargins = _getDimensions.svgMargins;\n\n    var xDomain = domain.x || this._getLabels(_data[0]);\n\n    var xScale = d3.scale.ordinal().domain(xDomain).rangeRoundBands([0, innerWidth], props.rangeRoundBandsPadding);\n    var minYDomain = Math.min(0, this._getStackedValuesMinY(_data));\n\n    var maxYDomain = this._getStackedValuesMaxY(_data);\n\n    var yDomain = domain.y || [minYDomain, maxYDomain];\n    var yScale = d3.scale.linear().range([innerHeight, 0]).domain(yDomain);\n    var series = props.data.map(function (item) {\n      return item.name;\n    });\n    return React.createElement('span', null, React.createElement(Chart, {\n      viewBox: this.getViewBox(),\n      legend: props.legend,\n      data: props.data,\n      margins: props.margins,\n      colors: props.colors,\n      colorAccessor: props.colorAccessor,\n      width: props.width,\n      height: props.height,\n      title: props.title,\n      shouldUpdate: !this.state.changeState\n    }, React.createElement('g', {\n      transform: trans,\n      className: props.chartClassName\n    }, React.createElement(YAxis, {\n      yAxisClassName: props.yAxisClassName,\n      yAxisTickValues: props.yAxisTickValues,\n      yAxisLabel: props.yAxisLabel,\n      yAxisLabelOffset: props.yAxisLabelOffset,\n      yScale: yScale,\n      margins: svgMargins,\n      yAxisTickCount: props.yAxisTickCount,\n      tickFormatting: props.yAxisFormatter,\n      tickStroke: props.xAxisTickStroke,\n      tickTextStroke: props.xAxisTickTextStroke,\n      width: innerWidth,\n      height: innerHeight,\n      horizontalChart: props.horizontal,\n      xOrient: props.xOrient,\n      yOrient: yOrient,\n      gridHorizontal: props.gridHorizontal,\n      gridHorizontalStroke: props.gridHorizontalStroke,\n      gridHorizontalStrokeWidth: props.gridHorizontalStrokeWidth,\n      gridHorizontalStrokeDash: props.gridHorizontalStrokeDash\n    }), React.createElement(XAxis, {\n      xAxisClassName: props.xAxisClassName,\n      xAxisTickValues: props.xAxisTickValues,\n      xAxisLabel: props.xAxisLabel,\n      xAxisLabelOffset: props.xAxisLabelOffset,\n      xScale: xScale,\n      margins: svgMargins,\n      tickFormatting: props.xAxisFormatter,\n      tickStroke: props.yAxisTickStroke,\n      tickTextStroke: props.yAxisTickTextStroke,\n      width: innerWidth,\n      height: innerHeight,\n      horizontalChart: props.horizontal,\n      xOrient: props.xOrient,\n      yOrient: yOrient,\n      gridVertical: props.gridVertical,\n      gridVerticalStroke: props.gridVerticalStroke,\n      gridVerticalStrokeWidth: props.gridVerticalStrokeWidth,\n      gridVerticalStrokeDash: props.gridVerticalStrokeDash\n    }), React.createElement(DataSeries, {\n      yScale: yScale,\n      xScale: xScale,\n      margins: svgMargins,\n      _data: _data,\n      series: series,\n      width: innerWidth,\n      height: innerHeight,\n      grouped: props.grouped,\n      colors: props.colors,\n      colorAccessor: props.colorAccessor,\n      hoverAnimation: props.hoverAnimation,\n      valuesAccessor: props.valuesAccessor,\n      xAccessor: props.xAccessor,\n      yAccessor: props.yAccessor,\n      y0Accessor: props.y0Accessor,\n      onMouseOver: this.onMouseOver,\n      onMouseLeave: this.onMouseLeave\n    }))), props.showTooltip ? React.createElement(Tooltip, this.state.tooltip) : null);\n  }\n});","map":{"version":3,"sources":["/Users/apple/Documents/WebDesign/Greener/final-project/greener-mern/node_modules/rd3/build/cjs/barchart/BarChart.js"],"names":["PropTypes","require","React","createReactClass","d3","DataSeries","_require","Chart","XAxis","YAxis","Tooltip","_require2","CartesianChartPropsMixin","DefaultAccessorsMixin","ViewBoxMixin","TooltipMixin","module","exports","displayName","propTypes","chartClassName","string","data","array","isRequired","hoverAnimation","bool","margins","object","rangeRoundBandsPadding","number","stackOffset","oneOf","grouped","valuesAccessor","func","xAccessor","yAccessor","y0Accessor","title","xAxisClassName","yAxisClassName","yAxisTickCount","mixins","getDefaultProps","top","right","bottom","left","d","values","y0","_getStackedValuesMaxY","_data","_this","props","max","d2","_getStackedValuesMinY","_this2","min","_getLabels","firstSeries","_props","map","_stack","_props2","layout","stack","offset","x","y","render","yOrient","getYOrient","domain","length","_getDimensions","getDimensions","innerHeight","innerWidth","trans","svgMargins","xDomain","xScale","scale","ordinal","rangeRoundBands","minYDomain","Math","maxYDomain","yDomain","yScale","linear","range","series","item","name","createElement","viewBox","getViewBox","legend","colors","colorAccessor","width","height","shouldUpdate","state","changeState","transform","className","yAxisTickValues","yAxisLabel","yAxisLabelOffset","tickFormatting","yAxisFormatter","tickStroke","xAxisTickStroke","tickTextStroke","xAxisTickTextStroke","horizontalChart","horizontal","xOrient","gridHorizontal","gridHorizontalStroke","gridHorizontalStrokeWidth","gridHorizontalStrokeDash","xAxisTickValues","xAxisLabel","xAxisLabelOffset","xAxisFormatter","yAxisTickStroke","yAxisTickTextStroke","gridVertical","gridVerticalStroke","gridVerticalStrokeWidth","gridVerticalStrokeDash","onMouseOver","onMouseLeave","showTooltip","tooltip"],"mappings":"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","sourcesContent":["'use strict';\n\nvar PropTypes = require('prop-types');\nvar React = require('react');\nvar createReactClass = require('create-react-class');\n\nvar d3 = require('d3');\nvar DataSeries = require('./DataSeries');\n\nvar _require = require('../common');\n\nvar Chart = _require.Chart;\nvar XAxis = _require.XAxis;\nvar YAxis = _require.YAxis;\nvar Tooltip = _require.Tooltip;\n\nvar _require2 = require('../mixins');\n\nvar CartesianChartPropsMixin = _require2.CartesianChartPropsMixin;\nvar DefaultAccessorsMixin = _require2.DefaultAccessorsMixin;\nvar ViewBoxMixin = _require2.ViewBoxMixin;\nvar TooltipMixin = _require2.TooltipMixin;\n\n\nmodule.exports = createReactClass({\n\n  displayName: 'BarChart',\n\n  propTypes: {\n    chartClassName: PropTypes.string,\n    data: PropTypes.array.isRequired,\n    hoverAnimation: PropTypes.bool,\n    margins: PropTypes.object,\n    rangeRoundBandsPadding: PropTypes.number,\n    // https://github.com/mbostock/d3/wiki/Stack-Layout#offset\n    stackOffset: PropTypes.oneOf(['silhouette', 'expand', 'wigget', 'zero']),\n    grouped: PropTypes.bool,\n    valuesAccessor: PropTypes.func,\n    xAccessor: PropTypes.func,\n    yAccessor: PropTypes.func,\n    y0Accessor: PropTypes.func,\n    title: PropTypes.string,\n    xAxisClassName: PropTypes.string,\n    yAxisClassName: PropTypes.string,\n    yAxisTickCount: PropTypes.number\n  },\n\n  mixins: [CartesianChartPropsMixin, DefaultAccessorsMixin, ViewBoxMixin, TooltipMixin],\n\n  getDefaultProps: function getDefaultProps() {\n    return {\n      chartClassName: 'rd3-barchart',\n      hoverAnimation: true,\n      margins: { top: 10, right: 20, bottom: 40, left: 45 },\n      rangeRoundBandsPadding: 0.25,\n      stackOffset: 'zero',\n      grouped: false,\n      valuesAccessor: function valuesAccessor(d) {\n        return d.values;\n      },\n      y0Accessor: function y0Accessor(d) {\n        return d.y0;\n      },\n      xAxisClassName: 'rd3-barchart-xaxis',\n      yAxisClassName: 'rd3-barchart-yaxis',\n      yAxisTickCount: 4\n    };\n  },\n  _getStackedValuesMaxY: function _getStackedValuesMaxY(_data) {\n    var _this = this;\n\n    // in stacked bar chart, the maximum height we need for\n    // yScale domain is the sum of y0 + y\n    var valuesAccessor = this.props.valuesAccessor;\n\n    return d3.max(_data, function (d) {\n      return d3.max(valuesAccessor(d), function (d2) {\n        return(\n          // where y0, y is generated by d3.layout.stack()\n          _this.props.y0Accessor(d2) + _this.props.yAccessor(d2)\n        );\n      });\n    });\n  },\n  _getStackedValuesMinY: function _getStackedValuesMinY(_data) {\n    var _this2 = this;\n\n    var valuesAccessor = this.props.valuesAccessor;\n\n    return d3.min(_data, function (d) {\n      return d3.min(valuesAccessor(d), function (d2) {\n        return(\n          // where y0, y is generated by d3.layout.stack()\n          _this2.props.y0Accessor(d2) + _this2.props.yAccessor(d2)\n        );\n      });\n    });\n  },\n  _getLabels: function _getLabels(firstSeries) {\n    // we only need first series to get all the labels\n    var _props = this.props;\n    var valuesAccessor = _props.valuesAccessor;\n    var xAccessor = _props.xAccessor;\n\n    return valuesAccessor(firstSeries).map(xAccessor);\n  },\n  _stack: function _stack() {\n    // Only support columns with all positive or all negative values\n    // https://github.com/mbostock/d3/issues/2265\n    var _props2 = this.props;\n    var stackOffset = _props2.stackOffset;\n    var xAccessor = _props2.xAccessor;\n    var yAccessor = _props2.yAccessor;\n    var valuesAccessor = _props2.valuesAccessor;\n\n    return d3.layout.stack().offset(stackOffset).x(xAccessor).y(yAccessor).values(valuesAccessor);\n  },\n  render: function render() {\n    var props = this.props;\n    var yOrient = this.getYOrient();\n\n    var domain = props.domain || {};\n\n    if (props.data.length === 0) {\n      return null;\n    }\n    var _data = this._stack()(props.data);\n\n    var _getDimensions = this.getDimensions();\n\n    var innerHeight = _getDimensions.innerHeight;\n    var innerWidth = _getDimensions.innerWidth;\n    var trans = _getDimensions.trans;\n    var svgMargins = _getDimensions.svgMargins;\n\n\n    var xDomain = domain.x || this._getLabels(_data[0]);\n    var xScale = d3.scale.ordinal().domain(xDomain).rangeRoundBands([0, innerWidth], props.rangeRoundBandsPadding);\n\n    var minYDomain = Math.min(0, this._getStackedValuesMinY(_data));\n    var maxYDomain = this._getStackedValuesMaxY(_data);\n    var yDomain = domain.y || [minYDomain, maxYDomain];\n    var yScale = d3.scale.linear().range([innerHeight, 0]).domain(yDomain);\n\n    var series = props.data.map(function (item) {\n      return item.name;\n    });\n\n    return React.createElement(\n      'span',\n      null,\n      React.createElement(\n        Chart,\n        {\n          viewBox: this.getViewBox(),\n          legend: props.legend,\n          data: props.data,\n          margins: props.margins,\n          colors: props.colors,\n          colorAccessor: props.colorAccessor,\n          width: props.width,\n          height: props.height,\n          title: props.title,\n          shouldUpdate: !this.state.changeState\n        },\n        React.createElement(\n          'g',\n          { transform: trans, className: props.chartClassName },\n          React.createElement(YAxis, {\n            yAxisClassName: props.yAxisClassName,\n            yAxisTickValues: props.yAxisTickValues,\n            yAxisLabel: props.yAxisLabel,\n            yAxisLabelOffset: props.yAxisLabelOffset,\n            yScale: yScale,\n            margins: svgMargins,\n            yAxisTickCount: props.yAxisTickCount,\n            tickFormatting: props.yAxisFormatter,\n            tickStroke: props.xAxisTickStroke,\n            tickTextStroke: props.xAxisTickTextStroke,\n            width: innerWidth,\n            height: innerHeight,\n            horizontalChart: props.horizontal,\n            xOrient: props.xOrient,\n            yOrient: yOrient,\n            gridHorizontal: props.gridHorizontal,\n            gridHorizontalStroke: props.gridHorizontalStroke,\n            gridHorizontalStrokeWidth: props.gridHorizontalStrokeWidth,\n            gridHorizontalStrokeDash: props.gridHorizontalStrokeDash\n          }),\n          React.createElement(XAxis, {\n            xAxisClassName: props.xAxisClassName,\n            xAxisTickValues: props.xAxisTickValues,\n            xAxisLabel: props.xAxisLabel,\n            xAxisLabelOffset: props.xAxisLabelOffset,\n            xScale: xScale,\n            margins: svgMargins,\n            tickFormatting: props.xAxisFormatter,\n            tickStroke: props.yAxisTickStroke,\n            tickTextStroke: props.yAxisTickTextStroke,\n            width: innerWidth,\n            height: innerHeight,\n            horizontalChart: props.horizontal,\n            xOrient: props.xOrient,\n            yOrient: yOrient,\n            gridVertical: props.gridVertical,\n            gridVerticalStroke: props.gridVerticalStroke,\n            gridVerticalStrokeWidth: props.gridVerticalStrokeWidth,\n            gridVerticalStrokeDash: props.gridVerticalStrokeDash\n          }),\n          React.createElement(DataSeries, {\n            yScale: yScale,\n            xScale: xScale,\n            margins: svgMargins,\n            _data: _data,\n            series: series,\n            width: innerWidth,\n            height: innerHeight,\n            grouped: props.grouped,\n            colors: props.colors,\n            colorAccessor: props.colorAccessor,\n            hoverAnimation: props.hoverAnimation,\n            valuesAccessor: props.valuesAccessor,\n            xAccessor: props.xAccessor,\n            yAccessor: props.yAccessor,\n            y0Accessor: props.y0Accessor,\n            onMouseOver: this.onMouseOver,\n            onMouseLeave: this.onMouseLeave\n          })\n        )\n      ),\n      props.showTooltip ? React.createElement(Tooltip, this.state.tooltip) : null\n    );\n  }\n});"]},"metadata":{},"sourceType":"script"}