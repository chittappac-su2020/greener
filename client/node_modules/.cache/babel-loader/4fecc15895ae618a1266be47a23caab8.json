{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/WebDesign/Greener/final-project/greener-mern/client/src/components/Services/Services.js\";\nimport React from 'react';\nimport './Services.css';\nimport axios from \"axios\";\nimport rd3 from 'rd3';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { submitBill, getBillData } from \"../../actions/billActions\";\nimport { logoutUser } from \"../../actions/authActions\";\nconst BarChart = rd3.BarChart;\nvar barData = [];\nvar al = false;\nconst wattsRegExp = /^[+]?([0-9]+(?:[\\.][0-9]*)?|\\.[0-9]+)$/; // const formValid = ({formErrors, ...rest}) => {\n//   let valid = true;\n//   Object.values(formErrors).forEach(val => { \n//     val.length>0 && (valid = false);\n//   });\n//   console.log(valid);\n//   return valid;\n// };\n// var barData = [\n//   {\n//     \"values\": [\n//       { x: \"January\", y:  91},\n//       { x: \"March\", y: 290},\n//       { x: \"May\", y: 787},\n//       { x: \"Ap\", y:  91},\n//       { x: \"Marddch\", y: 290},\n//       { x: \"Mssay\", y: 787},\n//       { x: \"Jansuary\", y:  91},\n//       { x: \"Mxarch\", y: 290},\n//     ]\n//   },\n// ];\n\nclass Services extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = e => {\n      e.preventDefault();\n\n      if (this.state.month != \"\" && this.state.year != \"\" && wattsRegExp.test(this.state.watts)) {\n        const billData = {\n          userid: this.props.auth.user.id,\n          month: this.state.month,\n          year: this.state.year,\n          watts: this.state.watts\n        };\n        this.props.submitBill(billData);\n        this.setState = {\n          month: '',\n          year: '',\n          watts: ''\n        };\n        alert(\"Bill Data submitted successfully\");\n      } else {\n        alert(\"Please fill all fields to submit bill data\");\n      }\n    };\n\n    this.generateGraph = e => {\n      e.preventDefault();\n      axios.get(\"/api/billData/submitbill\", {\n        params: {\n          id: this.props.auth.user.id\n        }\n      }).then(response => {\n        const r = response.data;\n        r.sort((a, b) => {\n          return a.year - b.year;\n        });\n        this.setState({\n          billData: r\n        }, () => {\n          this.constructData(this.state.billData);\n          this.forceUpdate();\n        });\n      });\n    };\n\n    this.setShow = b => {};\n\n    this.handleChange = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      let formErrors = this.state.formErrors;\n\n      switch (name) {\n        case \"month\":\n          formErrors.month = value.length > 0 ? \"\" : \"Month cannot be empty\";\n\n          if (value.length == 0) {\n            document.getElementById(\"inputM\").style.borderColor = \"red\";\n          } else {\n            document.getElementById(\"inputM\").style.borderColor = \"\";\n          }\n\n          this.setState({\n            month: event.target.value\n          });\n          break;\n\n        case \"year\":\n          formErrors.year = value.length > 0 ? \"\" : \"Year cannot be empty\";\n\n          if (value.length == 0) {\n            document.getElementById(\"inputY\").style.borderColor = \"red\";\n          } else {\n            document.getElementById(\"inputY\").style.borderColor = \"\";\n          }\n\n          this.setState({\n            year: event.target.value\n          });\n          break;\n\n        case \"watts\":\n          formErrors.watts = value > 0 && wattsRegExp.test(value) ? \"\" : \"Watts cannot be empty, negative numbers or contain special characters\"; // if(wattsRegExp.test(value)){\n          //   document.getElementById(\"inputW\").style.borderColor = \"red\";\n          // }else {\n          //   document.getElementById(\"inputW\").style.borderColor = \"\";\n          // }\n\n          this.setState({\n            watts: event.target.value\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        formErrors,\n        [name]: value\n      });\n    };\n\n    this.handleChangeMonth = event => {\n      this.setState({\n        month: event.target.value\n      });\n    };\n\n    this.handleChangeYear = event => {\n      this.setState({\n        year: event.target.value\n      });\n    };\n\n    this.handleChangeWatts = event => {\n      this.setState({\n        watts: event.target.value\n      });\n    };\n\n    this.state = {\n      userid: this.props.auth.user.id,\n      month: '',\n      year: '',\n      watts: '',\n      billData: [],\n      formErrors: {\n        month: '',\n        year: '',\n        watts: ''\n      }\n    };\n    this.handleChangeMonth = this.handleChangeMonth.bind(this);\n    this.handleChangeYear = this.handleChangeYear.bind(this);\n    this.handleChangeWatts = this.handleChangeWatts.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.generateGraph = this.generateGraph.bind(this);\n  }\n\n  constructData(data) {\n    barData = [];\n    var vals = [];\n    data.forEach(obj => {\n      var data1 = {\n        x: obj[\"month\"] + \" \" + obj[\"year\"],\n        y: obj[\"watts\"]\n      };\n      vals.push(data1);\n    });\n    var bar = {\n      \"values\": vals\n    };\n    barData.push(bar); //console.log(barData);\n\n    return barData;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"staticEmail\",\n      class: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Select Month\"), React.createElement(\"div\", {\n      class: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      id: \"inputM\",\n      name: \"month\",\n      class: \"form-control\",\n      value: this.state.month,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"January\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"February\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"March\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"April\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"May\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"June\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"July\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"August\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"September\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"October\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"November\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"December\")), React.createElement(\"span\", {\n      id: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, this.state.formErrors.month))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"staticEmail\",\n      class: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Select Year\"), React.createElement(\"div\", {\n      class: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      id: \"inputY\",\n      name: \"year\",\n      class: \"form-control\",\n      value: this.state.year,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"2000\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"2001\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"2002\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"2003\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"2004\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"2005\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"2006\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"2007\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"2008\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"2009\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"2010\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"2011\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"2012\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"2013\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"2014\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"2015\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"2016\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"2017\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"2018\"), React.createElement(\"option\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"2019\")), React.createElement(\"span\", {\n      id: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, this.state.formErrors.year))), React.createElement(\"div\", {\n      class: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"inputPassword\",\n      class: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Enter kWh\"), React.createElement(\"div\", {\n      class: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"input-group-append\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"number\",\n      name: \"watts\",\n      class: \"form-control\",\n      id: \"inputW\",\n      value: this.state.watts,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"input-group-text\",\n      id: \"inputGroupPrepend2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"kWh\")), React.createElement(\"span\", {\n      id: \"errorMsg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, this.state.formErrors.watts))), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-primary\",\n      onClick: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Submit\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-success\",\n      onClick: this.generateGraph,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Generate Graph\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(BarChart, {\n      data: barData,\n      width: 1000,\n      height: 300,\n      title: \"Bar Chart\",\n      xAxisLabel: \"Month\",\n      yAxisLabel: \"kWh\",\n      yAxisTickCount: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    })));\n  }\n\n}\n\n;\nServices.propTypes = {\n  submitBill: PropTypes.func.isRequired,\n  getBillData: PropTypes.func.isRequired,\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  submitBill,\n  getBillData,\n  logoutUser\n})(Services); // // export default Services;","map":{"version":3,"sources":["/Users/apple/Documents/WebDesign/Greener/final-project/greener-mern/client/src/components/Services/Services.js"],"names":["React","axios","rd3","PropTypes","connect","submitBill","getBillData","logoutUser","BarChart","barData","al","wattsRegExp","Services","Component","constructor","props","onSubmit","e","preventDefault","state","month","year","test","watts","billData","userid","auth","user","id","setState","alert","generateGraph","get","params","then","response","r","data","sort","a","b","constructData","forceUpdate","setShow","handleChange","event","target","name","value","formErrors","length","document","getElementById","style","borderColor","handleChangeMonth","handleChangeYear","handleChangeWatts","bind","vals","forEach","obj","data1","x","y","push","bar","render","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Services.css';\nimport axios from \"axios\";\nimport rd3 from 'rd3';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { submitBill, getBillData } from \"../../actions/billActions\";\nimport { logoutUser } from \"../../actions/authActions\";\nconst BarChart = rd3.BarChart;\nvar barData = [];\nvar al = false;\nconst wattsRegExp =  /^[+]?([0-9]+(?:[\\.][0-9]*)?|\\.[0-9]+)$/\n// const formValid = ({formErrors, ...rest}) => {\n//   let valid = true;\n\n//   Object.values(formErrors).forEach(val => { \n//     val.length>0 && (valid = false);\n//   });\n//   console.log(valid);\n//   return valid;\n// };\n// var barData = [\n//   {\n//     \"values\": [\n//       { x: \"January\", y:  91},\n//       { x: \"March\", y: 290},\n//       { x: \"May\", y: 787},\n//       { x: \"Ap\", y:  91},\n//       { x: \"Marddch\", y: 290},\n//       { x: \"Mssay\", y: 787},\n//       { x: \"Jansuary\", y:  91},\n//       { x: \"Mxarch\", y: 290},\n//     ]\n//   },\n// ];\nclass Services extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userid: this.props.auth.user.id,\n      month: '',\n      year: '',\n      watts: '',\n      billData: [],\n      formErrors: {\n        month:'',\n        year: '',\n        watts: ''\n      }\n    };\n    this.handleChangeMonth = this.handleChangeMonth.bind(this);\n    this.handleChangeYear = this.handleChangeYear.bind(this);\n    this.handleChangeWatts = this.handleChangeWatts.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.generateGraph = this.generateGraph.bind(this);\n  }\n  constructData(data) {\n    barData = [];\n    var vals = [];\n    data.forEach(obj => {\n      var data1 = {\n        x: obj[\"month\"] + \" \" + obj[\"year\"],\n        y: obj[\"watts\"]\n      }\n      vals.push(data1);\n    });\n    var bar = {\n      \"values\": vals\n    }\n    barData.push(bar);\n    //console.log(barData);\n    return barData;\n  }\n  onSubmit = (e) => {\n    e.preventDefault();\n    if(this.state.month!=\"\" && this.state.year !=\"\" && wattsRegExp.test(this.state.watts)) {\n      const billData = {\n        userid: this.props.auth.user.id,\n        month: this.state.month,\n        year: this.state.year,\n        watts: this.state.watts\n      };\n      this.props.submitBill(billData);\n      this.setState = ({month: '', year: '', watts: ''});\n      alert(\"Bill Data submitted successfully\");\n    } else {\n      alert(\"Please fill all fields to submit bill data\");\n    }\n  }\n\n  generateGraph = (e) => {\n    e.preventDefault();\n    axios\n    .get(\"/api/billData/submitbill\",{\n      params: {\n        id: this.props.auth.user.id\n      }\n  }).then((response) => {\n    const r = response.data;\n    r.sort((a, b) => {\n      return a.year - b.year;\n    });\n    this.setState({billData : r}, () => {\n      this.constructData(this.state.billData);\n      this.forceUpdate();\n    })\n  });\n  }\n  setShow = (b) => {\n\n  }\n  handleChange = (event) => {\n    const {name, value} = event.target;\n    let formErrors = this.state.formErrors;\n\n    switch(name) {\n      case \"month\":\n        formErrors.month =  value.length > 0 ? \"\" : \"Month cannot be empty\";\n        if(value.length == 0){\n          document.getElementById(\"inputM\").style.borderColor = \"red\";\n        }else {\n          document.getElementById(\"inputM\").style.borderColor = \"\";\n        }\n        this.setState({month: event.target.value})\n        break;\n      case \"year\":\n        formErrors.year = value.length > 0 ? \"\" : \"Year cannot be empty\";\n        if(value.length == 0){\n          document.getElementById(\"inputY\").style.borderColor = \"red\";\n        }else {\n          document.getElementById(\"inputY\").style.borderColor = \"\";\n        }\n        this.setState({year: event.target.value})\n        break;\n      case \"watts\":\n        formErrors.watts = value>0 && wattsRegExp.test(value) ? \"\" : \"Watts cannot be empty, negative numbers or contain special characters\";\n        // if(wattsRegExp.test(value)){\n        //   document.getElementById(\"inputW\").style.borderColor = \"red\";\n        // }else {\n        //   document.getElementById(\"inputW\").style.borderColor = \"\";\n        // }\n        this.setState({watts: event.target.value})\n          break;\n      default:\n        break;\n    }\n    this.setState({formErrors, [name]: value});\n  };\n  handleChangeMonth = event => {\n    this.setState({month: event.target.value});\n  };\n  handleChangeYear = event => {\n    this.setState({year: event.target.value});\n  };\n  handleChangeWatts = event => {\n    this.setState({watts: event.target.value});\n  };\n    render() {\n        return (\n            <div class=\"container\">\n  <form>\n  <div class=\"form-group\">\n    <label for=\"staticEmail\" class=\"col-sm-2 col-form-label\">Select Month</label>\n    <div class=\"col-sm-10\">\n      <select id=\"inputM\" name=\"month\" class=\"form-control\" value={this.state.month} onChange={this.handleChange}>\n      <option></option>\n      <option>January</option>\n      <option>February</option>\n      <option>March</option>\n      <option>April</option>\n      <option>May</option>\n      <option>June</option>\n      <option>July</option>\n      <option>August</option>\n      <option>September</option>\n      <option>October</option>\n      <option>November</option>\n      <option>December</option>\n      </select>\n      <span id=\"errorMsg\">{this.state.formErrors.month}</span>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"staticEmail\" class=\"col-sm-2 col-form-label\">Select Year</label>\n    <div class=\"col-sm-10\">\n      <select id=\"inputY\" name=\"year\" class=\"form-control\" value={this.state.year} onChange={this.handleChange}>\n      <option></option>\n      <option>2000</option>\n      <option>2001</option>\n      <option>2002</option>\n      <option>2003</option>\n      <option>2004</option>\n      <option>2005</option>\n      <option>2006</option>\n      <option>2007</option>\n      <option>2008</option>\n      <option>2009</option>\n      <option>2010</option>\n      <option>2011</option>\n      <option>2012</option>\n      <option>2013</option>\n      <option>2014</option>\n      <option>2015</option>\n      <option>2016</option>\n      <option>2017</option>\n      <option>2018</option>\n      <option>2019</option>\n      </select>\n      <span id=\"errorMsg\">{this.state.formErrors.year}</span>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"inputPassword\" class=\"col-sm-2 col-form-label\">Enter kWh</label>\n    <div class=\"col-sm-10\">\n      <div class=\"input-group-append\">\n      <input type=\"number\" name=\"watts\" class=\"form-control\" id=\"inputW\" value={this.state.watts} onChange={this.handleChange}/>\n          <span class=\"input-group-text\" id=\"inputGroupPrepend2\">kWh</span>\n        </div>\n        <span id=\"errorMsg\">{this.state.formErrors.watts}</span>\n    </div>\n  </div>\n  <button type=\"button\" class=\"btn btn-primary\" onClick={this.onSubmit}>Submit</button>\n  <button type=\"button\" class=\"btn btn-success\" onClick={this.generateGraph}>Generate Graph</button>\n</form>\n<br></br>\n<div>\n<BarChart\n  data={barData}\n  width={1000}\n  height={300}\n  title=\"Bar Chart\"\n  xAxisLabel=\"Month\"\n  yAxisLabel=\"kWh\"\n  yAxisTickCount={6}\n/>\n</div>\n</div>\n        )\n    }\n};\n\nServices.propTypes = {\n  submitBill: PropTypes.func.isRequired,\n  getBillData: PropTypes.func.isRequired,\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\nexport default connect(\n  mapStateToProps,\n  { submitBill, getBillData, logoutUser }\n)(Services);\n\n\n\n// // export default Services;"]},"metadata":{},"sourceType":"module"}